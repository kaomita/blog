---
title: Installing Ubuntu 20.04 Server
icon: server
date: 2024-09-29
# sidebar: false
category:
- Ubuntu
tags:
- tutorial
---

Introduction: The server is an eight-year-old Haier laptop with a dual-core 1.1GHz processor, 4GB RAM, and 1TB ROM. It's no longer capable of running Windows with a graphical interface comfortably. Previously, I had installed a dual system of Manjaro and Windows 10, but since my experiments require Ubuntu, I decided to set up a triple boot with Ubuntu. However, there were quite a few hiccups along the way: Manjaro vanished from the hard drive after a reboot, and after installing Ubuntu, the Windows 10 bootloader was also lost. Fortunately, Ubuntu Server was eventually installed successfully.

I used Manjaro for a while, and while I prefer its package management and installation methods compared to Ubuntu, Ubuntu is generally more stable for server use, though it does require a bit more memorization.

## Download Ubuntu 20.04 Server
[Official Download](https://ubuntu.com/download)

## Create a System Boot Disk
You can use a USB drive or a hard drive to create a bootable disk. If you're using a hard drive, allocate about 5GB and format it to FAT32. Since the USB ports on my old laptop are worn out, I opted to use the hard drive. Here’s how to do it.

Before proceeding, if you're not using the entire disk for Ubuntu, you need to partition it first and remember the partition number designated for Ubuntu—mine is `partition7`. You can check this in the Windows terminal with the following commands:
```bash
diskpart
list disk       # Check the disk list
select disk 0   # Select the disk
list partition  # Check the partition list
```

For the preparation and creation process, you can refer to [this guide](https://blog.csdn.net/HeyKith/article/details/127728921) on installing Windows and Ubuntu dual systems without a USB drive. If you're downloading the Ubuntu Server version, just follow the first half of the guide, as the installation process will only involve the command line.

## Install Ubuntu 20.04 Server
When you reach the installation page, you can use the default settings for language, keyboard, and network configuration. The crucial part is the disk partitioning. Remember to choose the correct partition number for Ubuntu, which in my case is `partition7`. Select manual partitioning, choose `partition7`, format it to `ext4`, and set the mount point to `/`. After confirming, the boot partition should automatically mount to `partition2`. Just keep pressing `done` until the installation is complete.

If you encounter an error during partitioning, like the following:

::: warning Error Message
Block probing did not discover any disks. Unfortunately, this means that installation will not be possible.
:::

Then congratulations—you've found a surprise.

Press F2 to enter the installation environment and run `lsblk` or `fdisk -l` in the terminal to check if the system recognizes the hard drive. If it doesn't, your hard drive might be set to `RAID` mode, which needs to be changed to `AHCI` mode in the BIOS. To enter the BIOS, you typically press `F2` or `F12` when starting the computer; you can look up the specific key for your model.

---

Another reason for this error might be if you're using a CD or ISO image; sometimes, the system attempts to unmount the mounted CD image, leading to a failure.

![Error message before installation](../../zh/posts/Ubuntu/1-1.jpg)

This issue puzzled me for a long time, but I eventually found a solution on [Stack Overflow](https://askubuntu.com/questions/1302392/ubuntu-server-20-04-setup-stuck-at-block-probing-did-not-discover-any-disks/1305972#1305972).

After entering the installation page, do not click done. Instead, press `F2` to access the terminal, run `umount /cdrom -l` to unmount, and then press ctrl+D to exit the terminal. Start the installation again from the first page; you should now be able to partition normally. However, take note: if you're using a hard drive as the bootable disk, you will need to remount it at the final installation step. Once you reach the partitioning page again, enter the terminal and type `sudo mount -o loop /dev/sda5 /cdrom`, replacing `sda5` with your boot disk's partition number. After remounting, exit the terminal with `ctrl+D` and resume the installation from the partitioning page.

---

Unfortunately, after rebooting at the end of the installation, I did not enter the Ubuntu terminal as expected but was taken through the installation process again. At this point, I thought the installation had failed, so I repeated the previous steps, which led to the loss of the Windows bootloader. The real reason was that after a successful installation, the GRUB bootloader for Ubuntu was still set as the primary boot option, causing it to default to the Ubuntu installation. The solution was to enter the BIOS on startup and manually boot into Ubuntu.

And that's how I completed the installation of Ubuntu 20.04 Server.

